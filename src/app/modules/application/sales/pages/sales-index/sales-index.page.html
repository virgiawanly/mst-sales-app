<ion-header mode="ios">
  <ion-toolbar>
    <ion-title>{{ 'sales' | translate | titlecase }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content id="page-content" [fullscreen]="true">
  <!-- Refresher -->
  <ion-refresher slot="fixed" mode="md" class="z-[2]" (ionRefresh)="refreshPage($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <!-- ! Refresher -->

  <div class="ion-padding">
    <div class="relative mb-3">
      <input
        type="text"
        class="form-control form-input w-full"
        placeholder="Search..."
        [(ngModel)]="salesSearch"
        (ngModelChange)="salesSearchDebounce.next($event)"
      />
      <ion-icon name="search-outline" class="absolute right-3 top-1/2 -translate-y-1/2"></ion-icon>
    </div>
    @if (sales.length) {
      <div class="grid gap-3">
        @for (customer of sales; track $index) {
          <app-sales-card [sales]="customer" (deleted)="onSalesDeleted($event)"></app-sales-card>
        }
      </div>
    } @else if (isLoadingSales && !sales.length) {
      <div class="grid gap-3">
        @for (loader of [1, 2, 3, 4, 5, 6]; track $index) {
          <app-sales-card-loader></app-sales-card-loader>
        }
      </div>
    } @else {
      <div class="grid min-h-[70vh] w-full place-items-center">
        <div class="flex flex-col items-center justify-center gap-5">
          <img src="/assets/images/no-data.svg" class="h-auto w-44 max-w-full" />
          <div class="flex flex-col items-center justify-center gap-1 text-center">
            <h6 class="text-lg font-bold">{{ 'no-data-found' | translate | titlecase }}</h6>
            <p class="max-w-56 text-sm text-slate-800 dark:text-zink-200">
              {{
                salesSearch.length
                  ? ('try-adjusting-query-placeholder' | translate)
                  : ('add-new-data-placeholder' | translate)
              }}.
            </p>
          </div>
        </div>
      </div>
    }
  </div>

  @if (sales.length < salesPagination.totalItems) {
    <div class="pt-6">
      <ion-infinite-scroll (ionInfinite)="loadMoreSales($event)">
        <ion-infinite-scroll-content [loadingSpinner]="'lines-sharp'"></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </div>
  }
</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button routerLink="/sales/create">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
</ion-fab>
