<ion-content [fullscreen]="true" id="page-content">
  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <div class="ion-padding relative flex min-h-screen flex-col items-center justify-center">
      <div class="absolute inset-x-0 top-0">
        <div class="min-h-[60vh] bg-gradient-to-b from-indigo-800 to-primary-500"></div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="-mt-1">
          <path
            class="fill-primary-500"
            fill-opacity="1"
            d="M0,64L120,53.3C240,43,480,21,720,37.3C960,53,1200,107,1320,133.3L1440,160L1440,0L1320,0C1200,0,960,0,720,0C480,0,240,0,120,0L0,0Z"
          ></path>
        </svg>
      </div>
      <div class="relative z-[2] flex w-full flex-1 flex-col items-center justify-center">
        <div class="flex flex-col items-center justify-center gap-3 py-6 text-center">
          <img src="/assets/images/logo-sm.png" class="h-auto w-16 max-w-full" />
          <h3 class="text-2xl font-extrabold text-white">MST Sales</h3>
        </div>
        <div class="w-full max-w-96 rounded-md border bg-white p-5 shadow-sm dark:border-zink-600 dark:bg-zink-700">
          <div class="mb-8 mt-4 flex flex-col items-center justify-center gap-1">
            <h1 class="text-2xl font-bold text-primary-900 dark:text-white">Sign In</h1>
            <p class="max-w-72 text-sm text-zink-500 dark:text-zink-200">Welcome back! Please sign in to continue.</p>
          </div>
          <div class="grid gap-5">
            <div class="flex w-full flex-col gap-1">
              <label for="username" class="inline-block text-base font-medium text-slate-800 dark:text-slate-400">
                Username or Email
              </label>
              <input
                type="text"
                id="username-or-email"
                formControlName="username_or_email"
                class="form-control form-input"
                placeholder="Enter username or email"
              />
              @if (
                loginForm.get('username_or_email')?.hasError('required') && loginForm.get('username_or_email')?.touched
              ) {
                <div id="username-or-email-error" class="mt-1 text-sm text-red-500">Username or email is required</div>
              }
            </div>
            <div class="flex w-full flex-col gap-1">
              <label for="password" class="inline-block text-base font-medium text-slate-800 dark:text-slate-400">
                Password
              </label>
              <input
                type="password"
                id="password"
                formControlName="password"
                class="form-control form-input"
                placeholder="Enter password"
              />
              @if (loginForm.get('password')?.hasError('required') && loginForm.get('password')?.touched) {
                <div id="username-or-email-error" class="mt-1 text-sm text-red-500">Password is required</div>
              }
            </div>
          </div>
          <div class="mt-7">
            <button
              type="submit"
              [disabled]="isLoggingIn"
              class="h-10 w-full rounded border-primary-500 bg-primary-500 px-5 text-sm font-semibold text-white hover:border-primary-900 hover:bg-primary-900 hover:text-white focus:border-primary-900 focus:bg-primary-900 focus:text-white focus:ring focus:ring-primary-100 active:border-primary-900 active:bg-primary-900 active:text-white active:ring active:ring-primary-100 disabled:opacity-50 dark:ring-primary-400/20"
            >
              @if (isLoggingIn) {
                <div
                  class="inline-block size-3 animate-spin rounded-full border-2 border-white border-l-transparent"
                ></div>
              } @else {
                <span>Sign In</span>
              }
            </button>
          </div>
        </div>
      </div>
      <div class="mt-3 justify-self-end py-3">
        <p class="text-sm text-slate-400">v1.0.0</p>
      </div>
    </div>
  </form>
</ion-content>
